<template>
    <section class="section food-section">
        <h2 class="section-title">La mejor parte ğŸœâœ¨</h2>
        <div class="my-carousel-container">
            <div class="my-carousel">
                <div
                    v-for="(image, index) in images"
                    :key="index"
                    class="my-carousel-item"
                >
                    <img :src="image.src" :alt="image.alt" />
                    <p class="caption">{{ image.caption }}</p>
                </div>
            </div>
        </div>
    </section>
</template>

<script setup>
const imageModules = import.meta.glob('@/assets/fotos/comida/*.{jpg,jpeg,png,webp}', { eager: true });

const images = Object.entries(imageModules).map(([path, module]) => {
    const name = path.split('/').pop().split('.')[0];
    return {
        src: module.default,
        alt: name,
        caption: generarCaptionBonita(name),
    };
});

function generarCaptionBonita(nombre) {
    const captions = {
        bar1: "En el Garden ğŸ¸",
        bar2: "La primera vez en Conclave ğŸ·",
        bar3: "Ese pediste tu ğŸ’…ğŸ»",
        bar4: "Ese era de cafe ğŸ¤¤",
        bar5: "En San Pedro, la unica vez que fui ğŸ˜…",
        bar6: "El Conclave, dijiste que parecia padre ğŸ™„",
        bar7: "El barÃ±o, mi foto de las papas ğŸ˜",
        bar8: "En el Mirror, yo no tome ese dia ğŸš—",
        burger1: "Cuando me llevaste al Fat Kid ğŸ«ƒğŸ»",
        burger2: "Las hamburguesas del Conclave ğŸ”",
        burger3: "Me llevaste al Johnny Rockets ğŸ‘¯â€â™€ï¸",
        burger4: "Volvimos al Fat Kid ğŸ˜…",
        burger5: "En el McDonalds con Benja y Geral ğŸ¢",
        burger6: "Fuimos de nuevo al Johnny Rockets ğŸª©",
        cafe1: "La Morada Alegre, me costo encontrarlo ğŸ˜‚",
        cafe2: "La primera vez que fuimos al CafÃ© Rosa â˜•",
        cafe3: "Uno que pillamos en valpo ğŸš¬",
        cafe4: "CafÃ© Rosa y ajedrez â™Ÿï¸",
        cafe5: "Good Nick + Coccolino â˜• y despuÃ©s a Intrigma ğŸ•µğŸ»",
        cafe6: "Esa fue mi primera derrota ğŸ¥¹",
        cafe7: "El Pasaje, nunca buscaron a Wally ğŸ”",
        cafe8: "Coccolino nuevo ğŸ†•",
        desayuno1: "Desayuno con los chiquillos ğŸ¥",
        donas1: "Nos echaron del Muelle Vergara ğŸ£",
        juegos1: "No aprendimos a jugar el Scrabble ğŸ…¿ï¸",
        juegos2: "Primera vez en la Cafetera de Juegos ğŸ²",
        juegos3: "Me destruyes siempre en Carcassonne ğŸ˜­",
        juegos4: "TambiÃ©n como mafiosa ğŸ”«",
        juegos5: "Perdiendo en horizontal â¬…ï¸â¡ï¸",
        juegos6: "Hasta haciendo casas me ganaste ğŸšï¸",
        mochi1: "Probaste el mochi de menta chips (creo ğŸ˜…)",
        mochi2: "Y yo el de oreo nutella ğŸ˜‹",
        picado1: "Experiencia de vino, quesos y perfumes ğŸ·ğŸ§€",
        pizza1: "Fuimos a la playa con la pizza del Under ğŸ•",
        pizza2: "Me mostraste el MasamÃ¡ ğŸ•",
        pizza3: "Y fuimos de nuevo ğŸ˜‹",
        pizza4: "Y otra vez mÃ¡s ğŸ˜‚",
        postre1: "Un postrecito del Johnny Rockets ğŸ¨",
        ramen1: "El ramen que nos acordamos hace poco ğŸœ",
        ramen2: "Y el del Tsuki ğŸœ",
        ramen3: "Yo me pedi unos onigiri ğŸ™",
        ramen4: "En el Mito Sushi, habia una pareja muy amorosa en la calle ğŸ¤®",
        starbucks1: "Una de las tantas â˜•ğŸ¨",
        starbucks2: "Y otra, ese dÃ­a no almorcÃ© ğŸ¥–",
        starbucks3: "Otra mÃ¡s, como no ğŸ§œğŸ»â€â™€ï¸",
        starbucks4: "Cuando tiraron los refresher nuevos ğŸ¥¤",
        waffle1: "Cuando probaste el Buffalo Waffles ğŸ§‡",
    };
    return captions[nombre] || "Â¡Un delicioso recuerdo!";
}
</script>

<style scoped>
.food-section {
    display: flex;
    width: 100%;
    flex-direction: column;
    align-items: center;
    padding: 1rem;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(4px);
    text-align: center;
}

.my-carousel-container {
    width: 100%;
    flex: 1;
    overflow-x: auto;
    overflow-y: hidden;
    scroll-snap-type: x mandatory;
    scroll-padding-inline: 10vw;          /* centra cada snap */
    -webkit-overflow-scrolling: touch;
    display: flex;
    align-items: center;
}

.my-carousel {
    display: flex;
    gap: 1rem;
}

.my-carousel-item {
    flex: 0 0 80vw;                       /* ocupa 80% viewport */
    max-width: 100%;
    height: 100%;
    scroll-snap-align: center;
    scroll-snap-stop: always;
    box-sizing: border-box;
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.1);
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
    overflow: hidden;
}

.my-carousel-item img {
    width: 100%;
    max-height: 60vh;
    object-fit: cover;
}

.caption {
    margin-top: 0.5rem;
    font-size: 0.9rem;
    font-style: italic;
    color: #555;
    padding: 0 0.5rem 0;
}
</style>
